import{o as s,c as S,w as o,a as t,d as l,g as x,t as m,h as b,b as r,e as g,n as p,u as d,F as k}from"./app-7485cb55.js";import{u as f,L as M}from"./index-fc7176c5.js";import h from"./Button-406cbd9c.js";import v from"./ValidationErrors-7f856797.js";import B from"./AppLayout-eb7b661f.js";import{p as T}from"./purify.es-68816782.js";import"./Banner-632dd745.js";import"./navbar-8d63831d.js";import"./vue-the-mask-85fa20c8.js";import"./sidebar-7fbca1a3.js";const L={class:"table-responsive"},j={class:"table"},O=["data-body"],D={class:"text-wrap w-7/10 block text-truncate truncate"},F={class:"btn-group"},N=["id"],V={key:0,class:"mb-4 font-medium text-sm text-green-600"},_=["id"],w={key:0,class:"mb-4 font-medium text-sm text-green-600"},z={class:"text-center"},A=["disabled"],E={data(){return{loadingMore:!1,allComments:this.comments.data,pagination:this.comments}},methods:{loadMore(){this.loadingMore||axios.get(`?page=${this.pagination.current_page+1}`).then(({data:e})=>{this.allComments=[...e.data,...this.allComments],this.pagination=e}).catch(e=>{}).finally(()=>this.loadingMore=!1)}}},X=Object.assign(E,{__name:"moderate",props:{canLogin:Boolean,canRegister:Boolean,title:String,status:String,name:String,role:String,avatar:String,version:String,comments:Object,breadcrumbCurrentTitle:String,breadcrumbCurrentSection:String,menulang:Object,menuitems:Object},setup(e){const u=f(),y=i=>{u.delete(route("managercomments.destroy",{id:i.submitter.dataset.comment}))},c=f({status:"approved"}),C=i=>{c.post(route("managercomments.setapproved",{id:i.submitter.dataset.comment}))};return $("body").ready(function(){$.each($("td.bodycomment"),function(i,a){$(a).html(T.sanitize(Base64.atob($(a).data("body"))))})}),(i,a)=>(s(),S(B,{menulang:e.menulang,menuitems:e.menuitems,avatar:e.avatar,role:e.role,name:e.name,version:e.version,breadcrumbCurrentTitle:e.breadcrumbCurrentTitle,breadcrumbCurrentSection:e.breadcrumbCurrentSection,title:e.title},{breadcrumb:o(()=>a[1]||(a[1]=[])),default:o(()=>[t("div",L,[t("table",j,[a[5]||(a[5]=t("thead",null,[t("tr",null,[t("th",null,"Comment"),t("th",null,"Article"),t("th",null,"Created in"),t("th",null,"Action")])],-1)),t("tbody",null,[(s(!0),l(k,null,x(i.allComments,(n,R)=>(s(),l("tr",{key:n.id},[t("td",{class:"text-wrap text-truncate truncate bodycomment","data-body":n.comment},"Undefined",8,O),t("td",D,m(n.post[0].title),1),t("td",null,m(new Date(n.created_at).toLocaleString()),1),t("td",null,[t("div",F,[t("form",{id:n.id,class:"w-100",onSubmit:b(C,["prevent"])},[r(v,{class:"mb-4"}),e.status?(s(),l("div",V,m(e.status),1)):g("",!0),r(h,{class:p(["btn btn-outline-light bg-light rounded-0 border-0 text-dark",{"opacity-25":d(c).processing}]),type:"submit","data-event":"submit","data-function":"approved","data-comment":n.id,disabled:d(c).processing,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"To approve"},{default:o(()=>a[2]||(a[2]=[t("i",{class:"mdi mdi-check"},null,-1)])),_:2},1032,["data-comment","class","disabled"])],40,N),r(d(M),{href:i.route("managercomments.edit",{id:n.id}),class:"btn btn-outline-light text-dark","data-event":"link","data-function":"edit","data-comments":n.id,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"To edit"},{default:o(()=>a[3]||(a[3]=[t("i",{class:"mdi mdi-pencil"},null,-1)])),_:2},1032,["href","data-comments"]),t("form",{id:n.id,class:"w-100",onSubmit:b(y,["prevent"])},[r(v,{class:"mb-4"}),e.status?(s(),l("div",w,m(e.status),1)):g("",!0),r(h,{class:p(["btn btn-outline-light bg-light rounded-0 border-0 text-dark",{"opacity-25":d(u).processing}]),type:"submit","data-event":"submit","data-function":"delete","data-comment":n.id,disabled:d(u).processing,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Delete"},{default:o(()=>a[4]||(a[4]=[t("i",{class:"mdi mdi-delete"},null,-1)])),_:2},1032,["data-comment","class","disabled"])],40,_)])])]))),128))])]),t("div",z,[t("button",{class:"border border-gray-600 text-gray-600 px-4 py-2 rounded-full hover:bg-gray-600 hover:text-white",onClick:a[0]||(a[0]=(...n)=>i.loadMore&&i.loadMore(...n)),disabled:i.loadingMore},"Show More",8,A)])])]),_:1},8,["menulang","menuitems","avatar","role","name","version","breadcrumbCurrentTitle","breadcrumbCurrentSection","title"]))}});export{X as default};
