import{u as o}from"./index-fc7176c5.js";import{F as p,i as c,a as m,b as E,c as b,D as f}from"./datetime-79dd386f.js";import{o as h,d as y,a,m as g,n as u,u as d,b as _,F as S}from"./app-7485cb55.js";const D={class:"collapse my-4",id:"collapseEventEdit"},w={class:"card"},T={class:"card-body",id:"editevent"},x={class:"col-12 col-md-6"},C=["disabled"],O={class:"card-footer"},F={class:"row"},M={class:"col-12 col-md-6"},A={id:"formdeleteevent"},G=["disabled"],V=o(),l=o(),r=o();function n(t,i=!1,e=!0,s=!0,v="extended"){return new f.fromISO(t).set({milliseconds:0,seconds:0}).toISO({suppressMilliseconds:e,suppressSeconds:s,includeOffset:i,format:v})}const q={components:{FullCalendar:p},data:function(){return{calendarOptions:{plugins:[c,m,E,b],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},events:function(t){return axios.get(route("managerscheduling.index",{start:t.startStr,end:t.endStr})).then(i=>i.data).catch(i=>{$("#app").before('<div class="alert alert-danger bg-danger">Falha ao carregar os eventos deste mÃªs</div>')})},locale:"pt",initialView:"dayGridMonth",displayEventTime:!0,editable:!0,selectable:!0,selectMirror:!0,weekends:!0,select:this.handleDateSelect,eventClick:this.handleEventClick,eventsSet:this.handleEvents},currentEvents:[]}},methods:{handleWeekendsToggle(){this.calendarOptions.weekends=!this.calendarOptions.weekends},handleDateSelect(t){let i=t.view.calendar;$("#modal").hasClass("show")==!1&&$("#modal").modal("show"),i.unselect(),$("input#inputEventStart").val(n(t.startStr)),$("input#inputEventEnd").val(n(t.endStr)),$("body").on("submit","form#newevent",function(e){$("form#newevent").find('button[type="submit"]').prop("disabled",!0),e.preventDefault(),V.transform(s=>({title:$("input#inputEventTitle").val(),start:n($("input#inputEventStart").val()),end:n($("input#inputEventEnd").val())})).post(route("managerscheduling.store"),{onSuccess:function(s){i.addEvent({id:s.props.id,title:$("input#inputEventTitle").val(),start:n($("input#inputEventStart").val()),end:n($("input#inputEventEnd").val()),allDay:t.allDay}),$("#modal").modal("hide"),$("form#newevent").find('button[type="submit"]').prop("disabled",!1)}})})},handleEventClick(t){t.view.calendar.unselect(),$("#collapseEventEdit").hasClass("show")==!1&&$("#collapseEventEdit").collapse("show"),new Date(t.event.startStr),new Date(t.event.endStr),$("input#inputDeleteEventID").val(t.event.id),$("input#inputEditEventID").val(t.event.id),$("input#inputEditEventTitle").val(t.event.title),$("input#inputEditEventStart").val(n(t.event.startStr)),$("input#inputEditEventEnd").val(n(t.event.endStr)),$("body").on("submit","form#formdeleteevent",function(e){e.preventDefault(),r.transform(s=>({id:t.event.id})).delete(route("managerscheduling.destroy",{id:t.event.id}),{onSuccess:function(){return t.event.remove(),$("#collapseEventEdit").collapse("hide"),!0}})}),$("body").on("submit","form#editevent",function(e){e.preventDefault(),l.transform(s=>({title:$("input#inputEditEventTitle").val(),start:n($("input#inputEditEventStart").val()),end:n($("input#inputEditEventEnd").val())})).put(route("managerscheduling.update",{id:t.event.id}),{onSuccess:function(){return t.event.setProp("title",$("input#inputEditEventTitle").val()),t.event.setDates(n($("input#inputEditEventStart").val()),n($("input#inputEditEventEnd").val())),!0}})})},handleEvents(t){this.currentEvents=t}}},j=Object.assign(q,{__name:"MylochiCalendar",setup(t){return(i,e)=>(h(),y(S,null,[a("div",D,[a("div",w,[a("form",T,[e[0]||(e[0]=g('<div class="mb-3"><label for="inputEditEventID" class="form-label">ID</label><input type="number" class="form-control" id="inputEditEventID" readonly></div><div class="mb-3"><label for="inputEditEventTitle" class="form-label">Titulo</label><input type="text" class="form-control" id="inputEditEventTitle" required></div><div class="mb-3"><label for="inputEditEventStart" class="form-label">inicio</label><input type="datetime-local" class="form-control" id="inputEditEventStart" required></div><div class="mb-3"><label for="inputEditEventEnd" class="form-label">Termino</label><input type="datetime-local" class="form-control" id="inputEditEventEnd" required></div>',4)),a("div",x,[a("button",{type:"submit",class:u(["btn btn-primary bg-primary",{"opacity-25":d(l).processing}]),disabled:d(l).processing},"Atualizar",10,C)])]),a("div",O,[a("div",F,[a("div",M,[a("form",A,[e[1]||(e[1]=a("input",{type:"hidden",class:"form-control",id:"inputDeleteEventID"},null,-1)),a("button",{type:"submit",class:u(["btn btn-danger bg-danger",{"opacity-25":d(r).processing}]),disabled:d(r).processing},"Excluir",10,G)])])])])])]),_(d(p),{class:"calendar w-full h-50",options:i.calendarOptions},null,8,["options"])],64))}});export{j as default};
